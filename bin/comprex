#!/usr/bin/env bash

#################################
# Simple xz compression utility #
#################################

# Params
# $1 - input file/files/directory
# $2 - output file
# $3 - compression level (optional)

input_file=$1
output_file=$2
level=$3

# Script start
if [ -z "$1$2" ]; then
    echo "Usage: comprex <input> <output> [compression level]"; exit 0
elif [ -z "$2" ]; then
    echo "Make sure to specify the output file."; exit 0
elif [ -z "$1" ]; then
    echo "Make sure to specify the input file."; exit 0
fi

# Compression level validation
if [ -z "$level" ]; then
	level="7"
fi

tar cvf ${output_file} --use-compress-program="xz -${level}T0" ${input_file}
